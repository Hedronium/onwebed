{"version":3,"sources":["edit.js","../../../../.nvm/versions/node/v11.0.0/lib/node_modules/parcel-bundler/src/builtins/bundle-url.js","../../../../.nvm/versions/node/v11.0.0/lib/node_modules/parcel-bundler/src/builtins/css-loader.js"],"names":["app","Elm","Main","init","node","document","querySelector","flags","pageName","page_name","pageTitle","page_title","content","page_content","csrfToken","csrf_token","ports","overlay","subscribe","enable","classList","add","remove","setupTextEditor","value","view_odl_overlay","getElementById","odl_editor_element","contains","editor","ace","edit","session","setValue","setUseWrapMode","on","e","setOdlString","send","getValue","adjust_spacing","window_width","window","innerWidth","screen","width","menu_height","offsetHeight","playground","style","marginTop","addEventListener","bundleURL","getBundleURLCached","getBundleURL","Error","err","matches","stack","match","getBaseURL","url","replace","exports","bundle","require","updateLink","link","newLink","cloneNode","onload","href","split","Date","now","parentNode","insertBefore","nextSibling","cssTimeout","reloadCSS","setTimeout","links","querySelectorAll","i","length","module"],"mappings":"ACAA,ACAA,IDAIoD,ACAAY,MAAM,GDAG,ACAAC,GDAG,IAAhB,ACAoB,CAAC,cAAD,CAApB;;ADCA,ACCA,AFFA,SCCSZ,ACCAa,UAAT,CAAoBC,IAApB,EAA0B,CDD1B,GAA8B;AAC5B,ACCA,MDDI,ACCAC,CDDChB,MCCM,GDDX,ACCce,EDDE,ECCE,CAACE,SAAL,EAAd;ADAEjB,ADDJ,ICCIA,SAAS,GAAGE,YAAY,EAAxB;AACD,ACADc,EAAAA,OAAO,CAACE,MAAR,GAAiB,YAAY;AAC3BH,AFDJ,IECIA,AFDAnE,GAAG,CECC,CAACsB,CFDCrB,KECN,KFDUC,IAAJ,CAASC,IAAT,CAAc;ACEtB,ACAC,AFDCC,EAAAA,CEDF,GFCM,EAAEC,CCCD+C,ODDS,CAAC9C,CCCjB,YDDQ,CAAuB,UAAvB,CADc;ACGvB,ADDGC,EAAAA,KAAK,EAAE;AECT6D,AFAM5D,EEAN4D,EFAM5D,KEAC,CAAC+D,EFAM,EEAd,AFAgB9D,GEAD0D,IAAI,CAACI,CFDX,GECM,CAAUC,KAAV,CAAgB,GAAhB,EAAqB,CAArB,IAA0B,GAA1B,GAAgCC,IAAI,CAACC,GAAL,EAA/C;ADEF,ACDEP,AFAMzD,EEANyD,EFAMzD,EEAF,CAACiE,EDCErB,IDDQ,EAAE3C,EEAjB,CAAgBiE,GDClB,GAAwB,CDHb,KEET,CAA6BR,OAA7B,EAAsCD,IAAI,CAACU,WAA3C;ADEA,ACDD,AFAOjE,IAAAA,OAAO,EAAEC,YAHN;ACKT,ADDMC,IAAAA,ECCF,ODDW,EAAEC;ACEf,ACDJ,AFLW,IEKP+D,MDCM,IAAIvB,ACDA,GAAG,EDCP,EAAN,ACDJ;ADEG,ADTqB,CAAd,CAAV,CCOE,CAEE,OAAOC,GAAP,EAAY;AACZ,ACFJ,QDEQC,CCFCsB,MDEM,GAAG,ACFlB,CDEmB,ECFE,GDEGvB,GAAG,CAACE,KAAV,EAAiBC,KAAjB,CAAuB,+DAAvB,CAAd;ACDF,AFCF3D,GAAG,CAACgB,EEDE8D,GFCN,CAAU7D,MEDR,CFCF,CEDkB,AFCAC,SAAlB,CAA4B,UAASC,MAAT,EAAiB;ACCzC,ACDA,AFCA,MAAIA,ECAAsC,IDAM,GCAV,C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","file":"edit.js","sourceRoot":"../../../js","sourcesContent":["import '../sass/edit.sass'\n\nimport { Elm } from '../../document_editor/src/Main.elm'\n\nvar app = Elm.Main.init({\n    node: document.querySelector(\".content\"),\n    flags: {\n        pageName: page_name,\n        pageTitle: page_title,\n        content: page_content,\n        csrfToken: csrf_token\n    }\n});\n\napp.ports.overlay.subscribe(function(enable) {\n    if (enable == true)\n        document.querySelector(\"html\").classList.add(\"noscroll\");\n    else\n        document.querySelector(\"html\").classList.remove(\"noscroll\");\n});\n\napp.ports.setupTextEditor.subscribe(function(value) {\n    let view_odl_overlay = document.getElementById(\"view_odl_overlay\");\n\n    let odl_editor_element;\n\n    if (view_odl_overlay.classList.contains(\"invisible\"))\n        odl_editor_element = document.querySelector(\"#edit_box_overlay #odl_editor\");\n    else\n        odl_editor_element = document.querySelector(\"#view_odl_overlay #odl_editor\");\n\n    let editor = ace.edit(odl_editor_element);\n\n    editor.session.setValue(value);\n    editor.session.setUseWrapMode(true);\n\n    editor.on(\"change\", function(e) {\n        app.ports.setOdlString.send(editor.getValue());\n    });\n});\n\nfunction adjust_spacing() {\n    let window_width = (window.innerWidth > 0) ? window.innerWidth : screen.width;\n\n    let menu_height = document.getElementById(\"menu\").offsetHeight;\n    let playground = document.getElementById(\"playground\");\n\n    if (window_width >= 769)\n        playground.style.marginTop = menu_height + \"px\";\n    else\n        playground.style.marginTop = \"0px\";\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", adjust_spacing);\nwindow.addEventListener('resize', adjust_spacing);","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n"]}